App4Sea=App4Sea||{},App4Sea.Weather=function(){"use strict";var my={NotWorking:function(evt){var coordinate=evt.coordinate,popupContent,description="<div id='openweathermap-widget-15' style='zoom: 0.8'></div>";document.getElementById("popup-content").innerHTML=description,window.myWidgetParam?window.myWidgetParam:window.myWidgetParam=[],window.myWidgetParam.push({id:15,cityid:"3413829",appid:"1326faa296b7e865683b67cdf8e5c6e4",units:"metric",containerid:"openweathermap-widget-15"}),function(){var script=document.createElement("script");script.async=!0,script.charset="utf-8",script.src="//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(script,s)}(),App4Sea.PopUps.overlayLayerPopUp.setPosition(coordinate)},loadCityWeather:function(url,id){var popupContent=document.getElementById("popup-content"),coordinate=App4Sea.OpenLayers.Map.getView().getCenter(),description="<div id='openweathermap-widget-15' style='zoom: 0.8'></div>";popupContent.innerHTML=description,window.myWidgetParam?window.myWidgetParam:window.myWidgetParam=[],window.myWidgetParam.push({id:15,cityid:"3413829",appid:"1326faa296b7e865683b67cdf8e5c6e4",units:"metric",containerid:"openweathermap-widget-15"}),function(){var script=document.createElement("script");script.async=!0,script.charset="utf-8",script.src="//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(script,s)}(),App4Sea.PopUps.overlayLayerPopUp.setPosition(coordinate)},loadWeather:function(url,id){console.log("loadWeather: "+id+" from "+url);for(var startResolution=ol.extent.getWidth(App4Sea.mapExtent)/256/4,resolutions=new Array(App4Sea.maxZoom-App4Sea.minZoom+1),i=0,ii=resolutions.length;i<ii;++i)resolutions[i]=startResolution/Math.pow(2,i);var tileGrid=new ol.tilegrid.TileGrid({extent:App4Sea.mapExtent,origin:[App4Sea.mapExtent[0],App4Sea.mapExtent[1]],resolutions:resolutions,projection:App4Sea.OpenLayers.prefViewProj,tileSize:[256,256]}),weather;return new ol.layer.Tile({name:id,preload:0,opacity:.8,extent:App4Sea.mapExtent,minResolution:resolutions[resolutions.length-1],maxResolution:resolutions[0],tileGrid:tileGrid,source:new ol.source.XYZ({crossOrigin:"anonymous",attributions:['&copy; <a href="https://openweathermap.org/">Open Weather Map</a>'],url:url})})}};return my}(App4Sea.Weather||{});