App4Sea=App4Sea||{},App4Sea.OpenLayers=function(){"use strict";var my={},currentLayer,osmTileLayer,esriWSPTileLayer,esriWITileLayer,blackTileLayer,overlayDescription;function initBasemapLayerTiles(){my.descriptionContainer=document.getElementById("legend"),overlayDescription=my.initOverlay(my.descriptionContainer),osmTileLayer=new ol.layer.Tile({name:"osmTileLayer",crossOriginKeyword:"anonymous",source:new ol.source.OSM}),esriWSPTileLayer=new ol.layer.Tile({name:"esriWSPTileLayer",crossOriginKeyword:"anonymous",source:new ol.source.XYZ({attributions:['&copy; <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/0">ArcGIS World Street Map</a>'],url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"})}),esriWITileLayer=new ol.layer.Tile({name:"esriWITileLayer",crossOriginKeyword:"anonymous",source:new ol.source.XYZ({attributions:['&copy; <a href="https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/0">ArcGIS World Imagery Map</a>'],url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),blackTileLayer=new ol.layer.Tile({name:"blackTileLayer",crossOriginKeyword:"anonymous",source:new ol.source.XYZ({attributions:['&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'],url:"http://{a-c}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"})})}function CreateBaseMap(){var map=new ol.Map({target:"MapContainer",view:new ol.View({center:App4Sea.mapCenter,zoom:App4Sea.startZoom,minZoom:App4Sea.minZoom,maxZoom:App4Sea.maxZoom})});my.Map=map,my.Map.on("singleclick",function(evt){App4Sea.PopUps.SingleClick(evt)}),my.Map.on("not_working",function(evt){App4Sea.Weather.NotWorking(evt)})}function updateBaseMap(){var selectedMapLayer=$("#MenuLayer_Select").val();if(selectedMapLayer!==currentLayer.name){my.Map.removeLayer(currentLayer);var el=$("#MenuContainer"),el2=$("#MenuLayer_Select"),el3=$("#ButtonContainer");"osmTileLayer"===selectedMapLayer?(el[0].style.backgroundColor="white",el[0].style.color="black",el3[0].style.filter="invert(0%)",currentLayer=osmTileLayer):"esriWSPTileLayer"===selectedMapLayer?(el[0].style.backgroundColor="beige",el[0].style.color="black",el3[0].style.filter="invert(0%)",currentLayer=esriWSPTileLayer):"esriWITileLayer"===selectedMapLayer?(el[0].style.backgroundColor="#163e6f",el[0].style.color="beige",currentLayer=esriWITileLayer,el3[0].style.filter="invert(100%)"):"blackTileLayer"===selectedMapLayer&&(el[0].style.backgroundColor="#0d0d0d",el[0].style.color="gray",el3[0].style.filter="invert(100%)",currentLayer=blackTileLayer),my.Map.addLayer(currentLayer)}}function SetMapControls(){var ctrl=new ol.control.MousePosition({projection:App4Sea.prefProj,coordinateFormat:function(coord){var str;return ol.coordinate.toStringHDMS(coord)}});my.Map.addControl(ctrl),my.Map.addControl(new ol.control.OverviewMap({layers:[currentLayer],collapsed:!0}))}function initMenu(){App4Sea.TreeMenu.setUp(),App4Sea.TreeInfo.setUp(),$(".MenuSection input[type='checkbox']").click(function(){updateBaseMap()}),$(".MenuSection select").change(function(){updateBaseMap()})}return my.Map,my.styleMaps=[],my.layers=[],my.descriptionContainer,my.Init=function(){initBasemapLayerTiles(),CreateBaseMap(),currentLayer=esriWSPTileLayer,App4Sea.PopUps.Init(),App4Sea.PopUps.initToolTip(),updateBaseMap(),SetMapControls(),initMenu();var res=App4Sea.Utils.supports_html5_storage();console.log("Support for html5 local storage: "+res)},my.initOverlay=function(container,closer){var overlay=new ol.Overlay({element:container,autoPan:!0,autoPanAnimation:{duration:2e3}});return closer&&(closer.onclick=function(){return overlay.setPosition(void 0),closer.blur(),!1}),overlay},my}(App4Sea.OpenLayers||{}),$(document).ready(function(){console.log("Document ready"),App4Sea.OpenLayers.Init(),$(".MenuItem").click(function(){console.log("MenuItem click");var url=$(this).attr("data-url"),target=$(this).attr("data-target");window.open(url,target)})}),$(window).on("load",function(){console.log("Window load"),setTimeout(function(){console.log("setTimeout"),$("#splash-overlay").fadeOut()},2e3);var info=$("#ToolTipInfo");info.tooltip("hide"),info.tooltip({animation:!1,trigger:"manual"})});