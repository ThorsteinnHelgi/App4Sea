!function(obj){"use strict";var ERR_BAD_FORMAT="File format is not recognized.",ERR_CRC="CRC failed.",ERR_ENCRYPTED="File contains encrypted entry.",ERR_ZIP64="File is using Zip64 (4gb+ file size).",ERR_READ="Error while reading zip file.",ERR_WRITE="Error while writing zip file.",ERR_WRITE_DATA="Error while writing file data.",ERR_READ_DATA="Error while reading file data.",ERR_DUPLICATED_NAME="File already exists.",CHUNK_SIZE=524288,TEXT_PLAIN="text/plain",appendABViewSupported;try{appendABViewSupported=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function Crc32(){this.crc=-1}function NOOP(){}function blobSlice(blob,index,length){if(index<0||length<0||index+length>blob.size)throw new RangeError("offset:"+index+", length:"+length+", size:"+blob.size);return blob.slice?blob.slice(index,index+length):blob.webkitSlice?blob.webkitSlice(index,index+length):blob.mozSlice?blob.mozSlice(index,index+length):blob.msSlice?blob.msSlice(index,index+length):void 0}function getDataHelper(byteLength,bytes){var dataBuffer,dataArray;return dataBuffer=new ArrayBuffer(byteLength),dataArray=new Uint8Array(dataBuffer),bytes&&dataArray.set(bytes,0),{buffer:dataBuffer,array:dataArray,view:new DataView(dataBuffer)}}function Reader(){}function TextReader(text){var that=this,blobReader;function init(callback,onerror){var blob=new Blob([text],{type:TEXT_PLAIN});(blobReader=new BlobReader(blob)).init(function(){that.size=blobReader.size,callback()},onerror)}function readUint8Array(index,length,callback,onerror){blobReader.readUint8Array(index,length,callback,onerror)}that.size=0,that.init=init,that.readUint8Array=readUint8Array}function Data64URIReader(dataURI){var that=this,dataStart;function init(callback){for(var dataEnd=dataURI.length;"="==dataURI.charAt(dataEnd-1);)dataEnd--;dataStart=dataURI.indexOf(",")+1,that.size=Math.floor(.75*(dataEnd-dataStart)),callback()}function readUint8Array(index,length,callback){var i,data=getDataHelper(length),start=4*Math.floor(index/3),end=4*Math.ceil((index+length)/3),bytes=obj.atob(dataURI.substring(start+dataStart,end+dataStart)),delta=index-3*Math.floor(start/4);for(i=delta;i<delta+length;i++)data.array[i-delta]=bytes.charCodeAt(i);callback(data.array)}that.size=0,that.init=init,that.readUint8Array=readUint8Array}function BlobReader(blob){var that=this;function init(callback){that.size=blob.size,callback()}function readUint8Array(index,length,callback,onerror){var reader=new FileReader;reader.onload=function(e){callback(new Uint8Array(e.target.result))},reader.onerror=onerror;try{reader.readAsArrayBuffer(blobSlice(blob,index,length))}catch(e){onerror(e)}}that.size=0,that.init=init,that.readUint8Array=readUint8Array}function Writer(){}function TextWriter(encoding){var that=this,blob;function init(callback){blob=new Blob([],{type:TEXT_PLAIN}),callback()}function writeUint8Array(array,callback){blob=new Blob([blob,appendABViewSupported?array:array.buffer],{type:TEXT_PLAIN}),callback()}function getData(callback,onerror){var reader=new FileReader;reader.onload=function(e){callback(e.target.result)},reader.onerror=onerror,reader.readAsText(blob,encoding)}this.init=init,this.writeUint8Array=writeUint8Array,this.getData=getData}function Data64URIWriter(contentType){var that=this,data="",pending="";function init(callback){data+="data:"+(contentType||"")+";base64,",callback()}function writeUint8Array(array,callback){var i,delta=pending.length,dataString=pending;for(pending="",i=0;i<3*Math.floor((delta+array.length)/3)-delta;i++)dataString+=String.fromCharCode(array[i]);for(;i<array.length;i++)pending+=String.fromCharCode(array[i]);dataString.length>2?data+=obj.btoa(dataString):pending=dataString,callback()}function getData(callback){callback(data+obj.btoa(pending))}this.init=init,this.writeUint8Array=writeUint8Array,this.getData=getData}function BlobWriter(contentType){var blob,that=this;function init(callback){blob=new Blob([],{type:contentType}),callback()}function writeUint8Array(array,callback){blob=new Blob([blob,appendABViewSupported?array:array.buffer],{type:contentType}),callback()}function getData(callback){callback(blob)}this.init=init,this.writeUint8Array=writeUint8Array,this.getData=getData}function launchWorkerProcess(worker,initialMessage,reader,writer,offset,size,onprogress,onend,onreaderror,onwriteerror){var chunkIndex=0,index,outputSize,sn=initialMessage.sn,crc;function onflush(){worker.removeEventListener("message",onmessage,!1),onend(outputSize,crc)}function onmessage(event){var message=event.data,data=message.data,err=message.error;if(err)return err.toString=function(){return"Error: "+this.message},void onreaderror(err);if(message.sn===sn)switch("number"==typeof message.codecTime&&(worker.codecTime+=message.codecTime),"number"==typeof message.crcTime&&(worker.crcTime+=message.crcTime),message.type){case"append":data?(outputSize+=data.length,writer.writeUint8Array(data,function(){step()},onwriteerror)):step();break;case"flush":crc=message.crc,data?(outputSize+=data.length,writer.writeUint8Array(data,function(){onflush()},onwriteerror)):onflush();break;case"progress":onprogress&&onprogress(index+message.loaded,size);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",message)}}function step(){(index=chunkIndex*CHUNK_SIZE)<size?reader.readUint8Array(offset+index,Math.min(CHUNK_SIZE,size-index),function(array){onprogress&&onprogress(index,size);var msg=0===index?initialMessage:{sn:sn};msg.type="append",msg.data=array,worker.postMessage(msg,[array.buffer]),chunkIndex++},onreaderror):worker.postMessage({sn:sn,type:"flush"})}outputSize=0,worker.addEventListener("message",onmessage,!1),step()}function launchProcess(process,reader,writer,offset,size,crcType,onprogress,onend,onreaderror,onwriteerror){var chunkIndex=0,index,outputSize=0,crcInput="input"===crcType,crcOutput="output"===crcType,crc=new Crc32;function step(){var outputData;if((index=chunkIndex*CHUNK_SIZE)<size)reader.readUint8Array(offset+index,Math.min(CHUNK_SIZE,size-index),function(inputData){var outputData;try{outputData=process.append(inputData,function(loaded){onprogress&&onprogress(index+loaded,size)})}catch(e){return void onreaderror(e)}outputData?(outputSize+=outputData.length,writer.writeUint8Array(outputData,function(){chunkIndex++,setTimeout(step,1)},onwriteerror),crcOutput&&crc.append(outputData)):(chunkIndex++,setTimeout(step,1)),crcInput&&crc.append(inputData),onprogress&&onprogress(index,size)},onreaderror);else{try{outputData=process.flush()}catch(e){return void onreaderror(e)}outputData?(crcOutput&&crc.append(outputData),outputSize+=outputData.length,writer.writeUint8Array(outputData,function(){onend(outputSize,crc.get())},onwriteerror)):onend(outputSize,crc.get())}}step()}function inflate(worker,sn,reader,writer,offset,size,computeCrc32,onend,onprogress,onreaderror,onwriteerror){var crcType=computeCrc32?"output":"none",initialMessage;obj.zip.useWebWorkers?launchWorkerProcess(worker,{sn:sn,codecClass:"Inflater",crcType:crcType},reader,writer,offset,size,onprogress,onend,onreaderror,onwriteerror):launchProcess(new obj.zip.Inflater,reader,writer,offset,size,crcType,onprogress,onend,onreaderror,onwriteerror)}function deflate(worker,sn,reader,writer,level,onend,onprogress,onreaderror,onwriteerror){var crcType="input",initialMessage;obj.zip.useWebWorkers?launchWorkerProcess(worker,{sn:sn,options:{level:level},codecClass:"Deflater",crcType:"input"},reader,writer,0,reader.size,onprogress,onend,onreaderror,onwriteerror):launchProcess(new obj.zip.Deflater,reader,writer,0,reader.size,"input",onprogress,onend,onreaderror,onwriteerror)}function copy(worker,sn,reader,writer,offset,size,computeCrc32,onend,onprogress,onreaderror,onwriteerror){var crcType="input",initialMessage;obj.zip.useWebWorkers&&computeCrc32?launchWorkerProcess(worker,{sn:sn,codecClass:"NOOP",crcType:"input"},reader,writer,offset,size,onprogress,onend,onreaderror,onwriteerror):launchProcess(new NOOP,reader,writer,offset,size,"input",onprogress,onend,onreaderror,onwriteerror)}function decodeASCII(str){var i,out="",charCode,extendedASCII=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(i=0;i<str.length;i++)out+=(charCode=255&str.charCodeAt(i))>127?extendedASCII[charCode-128]:String.fromCharCode(charCode);return out}function decodeUTF8(string){return decodeURIComponent(escape(string))}function getString(bytes){var i,str="";for(i=0;i<bytes.length;i++)str+=String.fromCharCode(bytes[i]);return str}function getDate(timeRaw){var date=(4294901760&timeRaw)>>16,time=65535&timeRaw;try{return new Date(1980+((65024&date)>>9),((480&date)>>5)-1,31&date,(63488&time)>>11,(2016&time)>>5,2*(31&time),0)}catch(e){}}function readCommonHeader(entry,data,index,centralDirectory,onerror){entry.version=data.view.getUint16(index,!0),entry.bitFlag=data.view.getUint16(index+2,!0),entry.compressionMethod=data.view.getUint16(index+4,!0),entry.lastModDateRaw=data.view.getUint32(index+6,!0),entry.lastModDate=getDate(entry.lastModDateRaw),1!=(1&entry.bitFlag)?((centralDirectory||8!=(8&entry.bitFlag))&&(entry.crc32=data.view.getUint32(index+10,!0),entry.compressedSize=data.view.getUint32(index+14,!0),entry.uncompressedSize=data.view.getUint32(index+18,!0)),4294967295!==entry.compressedSize&&4294967295!==entry.uncompressedSize?(entry.filenameLength=data.view.getUint16(index+22,!0),entry.extraFieldLength=data.view.getUint16(index+24,!0)):onerror(ERR_ZIP64)):onerror(ERR_ENCRYPTED)}function createZipReader(reader,callback,onerror){var inflateSN=0;function Entry(){}function seekEOCDR(eocdrCallback){var EOCDR_MIN=22;if(reader.size<EOCDR_MIN)onerror(ERR_BAD_FORMAT);else{var ZIP_COMMENT_MAX=65536,EOCDR_MAX=EOCDR_MIN+65536;doSeek(EOCDR_MIN,function(){doSeek(Math.min(EOCDR_MAX,reader.size),function(){onerror(ERR_BAD_FORMAT)})})}function doSeek(length,eocdrNotFoundCallback){reader.readUint8Array(reader.size-length,length,function(bytes){for(var i=bytes.length-EOCDR_MIN;i>=0;i--)if(80===bytes[i]&&75===bytes[i+1]&&5===bytes[i+2]&&6===bytes[i+3])return void eocdrCallback(new DataView(bytes.buffer,i,EOCDR_MIN));eocdrNotFoundCallback()},function(){onerror(ERR_READ)})}}Entry.prototype.getData=function(writer,onend,onprogress,checkCrc32){var that=this;function testCrc32(crc32){var dataCrc32=getDataHelper(4);return dataCrc32.view.setUint32(0,crc32),that.crc32==dataCrc32.view.getUint32(0)}function getWriterData(uncompressedSize,crc32){checkCrc32&&!testCrc32(crc32)?onerror(ERR_CRC):writer.getData(function(data){onend(data)})}function onreaderror(err){onerror(err||ERR_READ_DATA)}function onwriteerror(err){onerror(err||ERR_WRITE_DATA)}reader.readUint8Array(that.offset,30,function(bytes){var data=getDataHelper(bytes.length,bytes),dataOffset;1347093252==data.view.getUint32(0)?(readCommonHeader(that,data,4,!1,onerror),dataOffset=that.offset+30+that.filenameLength+that.extraFieldLength,writer.init(function(){0===that.compressionMethod?copy(that._worker,inflateSN++,reader,writer,dataOffset,that.compressedSize,checkCrc32,getWriterData,onprogress,onreaderror,onwriteerror):inflate(that._worker,inflateSN++,reader,writer,dataOffset,that.compressedSize,checkCrc32,getWriterData,onprogress,onreaderror,onwriteerror)},onwriteerror)):onerror(ERR_BAD_FORMAT)},onreaderror)};var zipReader={getEntries:function(callback){var worker=this._worker;seekEOCDR(function(dataView){var datalength,fileslength;datalength=dataView.getUint32(16,!0),fileslength=dataView.getUint16(8,!0),datalength<0||datalength>=reader.size?onerror(ERR_BAD_FORMAT):reader.readUint8Array(datalength,reader.size-datalength,function(bytes){var i,index=0,entries=[],entry,filename,comment,data=getDataHelper(bytes.length,bytes);for(i=0;i<fileslength;i++){if((entry=new Entry)._worker=worker,1347092738!=data.view.getUint32(index))return void onerror(ERR_BAD_FORMAT);readCommonHeader(entry,data,index+6,!0,onerror),entry.commentLength=data.view.getUint16(index+32,!0),entry.directory=16==(16&data.view.getUint8(index+38)),entry.offset=data.view.getUint32(index+42,!0),filename=getString(data.array.subarray(index+46,index+46+entry.filenameLength)),entry.filename=2048==(2048&entry.bitFlag)?decodeUTF8(filename):decodeASCII(filename),entry.directory||"/"!=entry.filename.charAt(entry.filename.length-1)||(entry.directory=!0),comment=getString(data.array.subarray(index+46+entry.filenameLength+entry.extraFieldLength,index+46+entry.filenameLength+entry.extraFieldLength+entry.commentLength)),entry.comment=2048==(2048&entry.bitFlag)?decodeUTF8(comment):decodeASCII(comment),entries.push(entry),index+=46+entry.filenameLength+entry.extraFieldLength+entry.commentLength}callback(entries)},function(){onerror(ERR_READ)})})},close:function(callback){this._worker&&(this._worker.terminate(),this._worker=null),callback&&callback()},_worker:null};obj.zip.useWebWorkers?createWorker("inflater",function(worker){zipReader._worker=worker,callback(zipReader)},function(err){onerror(err)}):callback(zipReader)}function encodeUTF8(string){return unescape(encodeURIComponent(string))}function getBytes(str){var i,array=[];for(i=0;i<str.length;i++)array.push(str.charCodeAt(i));return array}function createZipWriter(writer,callback,onerror,dontDeflate){var files={},filenames=[],datalength=0,deflateSN=0;function onwriteerror(err){onerror(err||ERR_WRITE)}function onreaderror(err){onerror(err||ERR_READ_DATA)}var zipWriter={add:function(name,reader,onend,onprogress,options){var header,filename,date,worker=this._worker;function writeHeader(callback){var data;date=options.lastModDate||new Date,header=getDataHelper(26),files[name]={headerArray:header.array,directory:options.directory,filename:filename,offset:datalength,comment:getBytes(encodeUTF8(options.comment||""))},header.view.setUint32(0,335546376),options.version&&header.view.setUint8(0,options.version),dontDeflate||0===options.level||options.directory||header.view.setUint16(4,2048),header.view.setUint16(6,(date.getHours()<<6|date.getMinutes())<<5|date.getSeconds()/2,!0),header.view.setUint16(8,(date.getFullYear()-1980<<4|date.getMonth()+1)<<5|date.getDate(),!0),header.view.setUint16(22,filename.length,!0),(data=getDataHelper(30+filename.length)).view.setUint32(0,1347093252),data.array.set(header.array,4),data.array.set(filename,30),datalength+=data.array.length,writer.writeUint8Array(data.array,callback,onwriteerror)}function writeFooter(compressedLength,crc32){var footer=getDataHelper(16);datalength+=compressedLength||0,footer.view.setUint32(0,1347094280),void 0!==crc32&&(header.view.setUint32(10,crc32,!0),footer.view.setUint32(4,crc32,!0)),reader&&(footer.view.setUint32(8,compressedLength,!0),header.view.setUint32(14,compressedLength,!0),footer.view.setUint32(12,reader.size,!0),header.view.setUint32(18,reader.size,!0)),writer.writeUint8Array(footer.array,function(){datalength+=16,onend()},onwriteerror)}function writeFile(){options=options||{},name=name.trim(),options.directory&&"/"!=name.charAt(name.length-1)&&(name+="/"),files.hasOwnProperty(name)?onerror(ERR_DUPLICATED_NAME):(filename=getBytes(encodeUTF8(name)),filenames.push(name),writeHeader(function(){reader?dontDeflate||0===options.level?copy(worker,deflateSN++,reader,writer,0,reader.size,!0,writeFooter,onprogress,onreaderror,onwriteerror):deflate(worker,deflateSN++,reader,writer,options.level,writeFooter,onprogress,onreaderror,onwriteerror):writeFooter()},onwriteerror))}reader?reader.init(writeFile,onreaderror):writeFile()},close:function(callback){this._worker&&(this._worker.terminate(),this._worker=null);var data,length=0,index=0,indexFilename,file;for(indexFilename=0;indexFilename<filenames.length;indexFilename++)length+=46+(file=files[filenames[indexFilename]]).filename.length+file.comment.length;for(data=getDataHelper(length+22),indexFilename=0;indexFilename<filenames.length;indexFilename++)file=files[filenames[indexFilename]],data.view.setUint32(index,1347092738),data.view.setUint16(index+4,5120),data.array.set(file.headerArray,index+6),data.view.setUint16(index+32,file.comment.length,!0),file.directory&&data.view.setUint8(index+38,16),data.view.setUint32(index+42,file.offset,!0),data.array.set(file.filename,index+46),data.array.set(file.comment,index+46+file.filename.length),index+=46+file.filename.length+file.comment.length;data.view.setUint32(index,1347093766),data.view.setUint16(index+8,filenames.length,!0),data.view.setUint16(index+10,filenames.length,!0),data.view.setUint32(index+12,length,!0),data.view.setUint32(index+16,datalength,!0),writer.writeUint8Array(data.array,function(){writer.getData(callback)},onwriteerror)},_worker:null};obj.zip.useWebWorkers?createWorker("deflater",function(worker){zipWriter._worker=worker,callback(zipWriter)},function(err){onerror(err)}):callback(zipWriter)}function resolveURLs(urls){var a=document.createElement("a");return urls.map(function(url){return a.href=url,a.href})}Crc32.prototype.append=function append(data){for(var crc=0|this.crc,table=this.table,offset=0,len=0|data.length;offset<len;offset++)crc=crc>>>8^table[255&(crc^data[offset])];this.crc=crc},Crc32.prototype.get=function get(){return~this.crc},Crc32.prototype.table=function(){var i,j,t,table=[];for(i=0;i<256;i++){for(t=i,j=0;j<8;j++)1&t?t=t>>>1^3988292384:t>>>=1;table[i]=t}return table}(),NOOP.prototype.append=function append(bytes,onprogress){return bytes},NOOP.prototype.flush=function flush(){},TextReader.prototype=new Reader,TextReader.prototype.constructor=TextReader,Data64URIReader.prototype=new Reader,Data64URIReader.prototype.constructor=Data64URIReader,BlobReader.prototype=new Reader,BlobReader.prototype.constructor=BlobReader,Writer.prototype.getData=function(callback){callback(this.data)},TextWriter.prototype=new Writer,TextWriter.prototype.constructor=TextWriter,Data64URIWriter.prototype=new Writer,Data64URIWriter.prototype.constructor=Data64URIWriter,BlobWriter.prototype=new Writer,BlobWriter.prototype.constructor=BlobWriter;var DEFAULT_WORKER_SCRIPTS={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function createWorker(type,callback,onerror){if(null===obj.zip.workerScripts||null===obj.zip.workerScriptsPath){var scripts;if(obj.zip.workerScripts){if(scripts=obj.zip.workerScripts[type],!Array.isArray(scripts))return void onerror(new Error("zip.workerScripts."+type+" is not an array!"));scripts=resolveURLs(scripts)}else(scripts=DEFAULT_WORKER_SCRIPTS[type].slice(0))[0]=(obj.zip.workerScriptsPath||"")+scripts[0];var worker=new Worker(scripts[0]);worker.codecTime=worker.crcTime=0,worker.postMessage({type:"importScripts",scripts:scripts.slice(1)}),worker.addEventListener("message",onmessage),worker.addEventListener("error",errorHandler)}else onerror(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function onmessage(ev){var msg=ev.data;if(msg.error)return worker.terminate(),void onerror(msg.error);"importScripts"===msg.type&&(worker.removeEventListener("message",onmessage),worker.removeEventListener("error",errorHandler),callback(worker))}function errorHandler(err){worker.terminate(),onerror(err)}}function onerror_default(error){console.error(error)}obj.zip={Reader:Reader,Writer:Writer,BlobReader:BlobReader,Data64URIReader:Data64URIReader,TextReader:TextReader,BlobWriter:BlobWriter,Data64URIWriter:Data64URIWriter,TextWriter:TextWriter,createReader:function(reader,callback,onerror){onerror=onerror||onerror_default,reader.init(function(){createZipReader(reader,callback,onerror)},onerror)},createWriter:function(writer,callback,onerror,dontDeflate){onerror=onerror||onerror_default,dontDeflate=!!dontDeflate,writer.init(function(){createZipWriter(writer,callback,onerror,dontDeflate)},onerror)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(this);