<!DOCTYPE html>
<html>



    <head>
        <title>App4Sea</title>
        <link rel="icon" href="favicon.ico"/>        

        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>        
<!--
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
   >

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.10.1/ol.min.js" type="text/javascript"></script>
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"/> 
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>

        <link href="jquery/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
        <script src="jquery/jquery-3.2.1.min.js" type="text/javascript"></script>
        <script src="jquery/jquery-ui.min.js" type="text/javascript"></script>

        <link href="jquery/jquery.growl.css" rel="stylesheet" type="text/css" />
        <script src="jquery/jquery.growl.js" type="text/javascript"></script>

        <script src="static/js/mustache.js" type="text/javascript"></script>
        
        <!-- https://medialize.github.io/URI.js/ -->
        <script src="static/js/URI.js" type="text/javascript"></script>
        <!-- https://github.com/webcomponents/webcomponentsjs/ -->
        <script src="static/js/webcomponents-bundle.js" type="text/javascript"></script>

        <script src="static/js/qwest.min.js" type="text/javascript"></script>
        <script src="static/js/zip.js" type="text/javascript"></script>
        <!--script src="static/js/cors-public.js" type="text/javascript"></script-->
        
        <!-- OpenLayers begin -->

        <!--link rel="stylesheet" href="https://openlayers.org/en/v4.6.4/css/ol.css" type="text/css"/>
        <script src="https://openlayers.org/en/v4.6.4/build/ol.js" type="text/javascript"></script-->
        <script type="text/javascript" src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.1.3/build/ol.js"></script>
        <link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.1.3/css/ol.css"/>
            
        <!-- OpenWeatherMaps widget -->
        <script type="text/javascript" src="http://openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js"></script>
        
        <script src="scripts/App4Sea.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.KML.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.PopUps.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.Utils.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.Weather.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.TreeMenu.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.TreeInfo.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.Events.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.Functions.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.Animation.js" type="text/javascript"></script>
        <script src="scripts/App4Sea.Map.OpenLayers.js" type="text/javascript"></script>
        <!-- OpenLayers end -->

        <link href="css/main.css" rel="stylesheet" type="text/css" />
        
        <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
        <!-- This will not work anyway in IE. And it will render coordinates for kml files as 0,0 -->
        <!--script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
        <script src="https://openlayers.org/en/v4.6.5/build/ol.js"></script-->

        <link rel="stylesheet" href="static/js/dist/themes/default/style.min.css" />
        <script src="static/js/dist/jstree.min.js" type="text/javascript"></script>
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

        <!-- Optional theme -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"/>

        <!-- Latest compiled and minified JavaScript -->
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>

    </head>


    
    <body>
        <!-- Splash overlay -->
        <div id="splash-overlay">
            <div id="splash-overlay-content">
                <img src="images/PosterHor.jpg" alt="App4Sea is an NPA-project" style="width:100%;" />
            </div>
        </div>
        
        <!-- This is the left side menu container -->
        <div id="MenuContainer" class="w3-sidebar w3-bar-block" style="display:none"> 
            <div id="ButtonMenu" style="display:inline-block; width:100%;">
                <button onclick="section_toggle('MenuContainer')" class="w3-button w3-transparent" style="float:left; font-weight:bold; padding-left:0px; padding-right:3px; ">
                    <img src="icons/CloseMenu.png" alt="Close menu" style="width:1em;" />
                </button>
                <button onclick="section_toggle('InfoContainer')" class="w3-button w3-transparent" style="float:left; font-weight:bold; padding-left:3px; padding-right:3px; ">
                    <img src="icons/info.png" alt="Information" style="width:1em;" />
                </button>
                <button onclick="section_toggle('SettingsContainer')" class="w3-button w3-transparent" style="float:left; font-weight:bold; padding-left:3px; padding-right:3px; ">
                    <img src="icons/settings.png" alt="Settings" style="width:1.1em;" />
                </button>
                <button onclick="section_toggle('AnimationContainer')" class="w3-button w3-transparent" style="float:left; font-weight:bold; padding-left:3px; padding-right:3px; ">
                    <img src="icons/animation.png" alt="Animation" style="width:1.1em;" />
                </button>
                <!--button id="testBtn" class="w3-button w3-transparent" style="float:left; font-weight:bold; padding-left:0px; padding-right:3px; ">Test</button-->
                <button onclick="w3_close('MenuContainer')" class="w3-button w3-transparent" style="float:right; font-weight:bold; padding-left:3px; padding-right:3px; ">x</button>
            </div>
            <div>
                <a href="http://app4sea.interreg-npa.eu">
                    <img src="images/App4Sea.jpg" alt="App4Sea is an NPA-project" style="width:100%;"/>
                </a>
            </div>
            
            <div id='InfoContainer' class="MenuSection" style="color:white; background-color:grey; display:none; padding:3px;">
                <button onclick="w3_close('InfoContainer')" class="w3-button w3-transparent" style="float:right; font-weight:bold; padding-left:3px; padding-right:0px;">x</button>
                <h4>Information</h4>

                <div style="font-size:0.8em;">
                    This site currently works best in the Chrome and Vivaldi browsers.<br/>
                    To access cross domain information please add 
                    <a style="color:gold" href='https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf?brand=CHBD&gclid=EAIaIQobChMIxsz1iebz3AIVwcDACh3yDgHbEAAYASABEgKjnvD_BwE&gclsrc=aw.ds&dclid=CNTTwZHm89wCFdQm4AodmP0Obw' title='Allow CORS'> 
                            this extension
                    </a> to those browsers.<br/>
                    NOTE: You may have to disable the extension on other sites, e.g. while watching Youtube videos.
                </div>
            </div>
            
            <div id='SettingsContainer' class="MenuSection" style="color:white; background-color:grey; display:none; padding:3px;">
                <button onclick="w3_close('SettingsContainer')" class="w3-button w3-transparent" style="float:right; font-weight:bold; padding-left:3px; padding-right:0px;">x</button>
                <h4>Settings</h4>

                <h5>Base map</h5>
                <div class="MenuSection">
                    <select id="MenuLayer_Select" style="color:white; background-color:grey;">
                        <option value="esriWSPTileLayer">ESRI World Street Map</option>
                        <option value="esriWITileLayer">ESRI World Imagery Map</option>
                        <option value="osmTileLayer">Open Street Map</option>
                        <option value="blackTileLayer">Carto DB Dark Matter Map</option>
                    </select>
                </div>
                
                <h5>Heatmap settings</h5>
                <div class="MenuSection" style="background-color: grey">
                    <div style="font-size:0.6em; color:white">
                        <form>
                            <table width="100%">
                                <tr style="text-align:center">
                                    <td colspan="4">
                                        <span id="titleHeatMap">title</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <br/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:right">
                                        <span>Radius Size</span>
                                    </td>
                                    <td>
                                        <input id="radius" type="range" min="1" max="50" step="1" value="5"/>
                                    </td>
                                    <td style="text-align:right">
                                        <span>Blur Size</span>
                                    </td>
                                    <td>
                                        <input id="blur" type="range" min="1" max="50" step="1" value="15"/>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>
            </div>

            <div id='AnimationContainer' class="MenuSection" style="color:white; background-color:grey; display:none; padding:3px;"
                 ondrop="drop(event)" ondragover="allowDrop(event)">
                <button onclick="w3_close('AnimationContainer')" class="w3-button w3-transparent" style="float:right; font-weight:bold; 
                        padding-left:3px; padding-right:0px; background-color:Transparent; outline:none;">x</button>

                <h4>Animation</h4>
                <div class="MenuSection">
                    <div style="font-size:0.6em; color:white; background-color:grey;">
                        <form>
                            <table width="100%">
                                <tr style="text-align:center">
                                    <td colspan="4">
                                        <span id="title">title</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button id="playStop" type="button" style="font-size:0.5em; color: Grey;">
                                            <img id="playStopImg" src="icons/play.png" alt="Play/Stop" height="14px"/>
                                        </button>
                                    </td>
                                    <td colspan="3">
                                        <input id="progress" type="range" min="0" max="99" step="1" value="0"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="25%">
                                    </td>
                                    <td width="25%">
                                        <span id="startDate">start</span><br/>
                                        <span id="start">start</span>
                                    </td>
                                    <td width="25%" style="text-align:center">
                                        <span id="currentDate">current</span><br/>
                                        <span id="current">current</span>
                                    </td>
                                    <td width="25%" style="text-align:right">
                                        <span id="endDate">end</span><br/>
                                        <span id="end">end</span>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>

                    <div role="group" aria-label="Animation controls" >
                        <div id="popup" class="ol-popup">
                            <a href="#" id="popup-closer" class="ol-popup-closer"></a>
                            <div id="popup-content"  class="clearfix" style="overflow: auto; margin: 5px;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h4>
                <div>
                    <button class="w3-button w3-white" style="padding-left:0px; padding-right:0px; font-size:0.6em;" onclick="collapse_tree(this, '#TreeMenu')">&#9650;</button>
                    Layers
                </div>
            </h4>
            <div id="TreeMenu" class="MenuSection"></div>

            <h4>
                <div>
                    <button class="w3-button w3-white" style="padding-left:0px; padding-right:0px; font-size:0.6em;" onclick="collapse_tree(this, '#TreeInfo')">&#9660;</button>
                    Further information
                </div>
            </h4>
            <div id="TreeInfo" class="MenuSection"></div>
        </div>

        <!-- This is the main map container. It is populated in code -->
        <div id="MapContainer">
            <div class="ol-unselectable ol-custom ol-control">
               <button class="ol-zoom-in " onclick="w3_open('MenuContainer')">â˜°</button>
            </div>            
            <!-- This is the tool-tip container. It is populated in code -->
            <div id="ToolTipInfo"></div>            
            
                    <div id="legend" style="display:block; overflow: auto; background-color: white;">
                                                                                
                    </div>

            <!-- This is the legend (ScreenOverlay) container. It is populated in code -->
            <div id="overlayLegend">
                <div id="overlayLegend-content">
                    <img id="imgLegend" src="" style="" />
                </div>
            </div>

            <img id="photo" style="top: 9.5em; left: .5em; display:none; "/>
        </div>

        <!-- This is the debug window container that should be hidden in final application. It is populated in code  -->
        <div id="DebugWindow" style="display:none;"></div>
        
        <script>
            var info = $("#ToolTipInfo");
            
            info.tooltip('hide');
            info.tooltip({
                animation: false,
                trigger: 'manual'
            });
            
            function collapse_tree(btn, elem) {
                var collapse = false;
                if($(elem+' li.jstree-open').length)
                {
                    collapse = true;
                }
                if (collapse) {
                    $(elem).jstree(true).close_all();
                    btn.innerText="\u25BC";
                }
                else {
                    $(elem).jstree(true).open_all();
                    btn.innerText="\u25B2";
                }
            }

            function section_toggle(id) {
                if (document.getElementById(id).style.display === "none") {
                    w3_open(id);
                }
                else {
                    w3_close(id);
                }
            }
    
            function w3_open(id) {
                if (id === "MenuContainer") {
                    $("#TreeMenu").jstree(true).close_all();
                }
                document.getElementById(id).style.display = "block";
            }
            function w3_close(id) {
                document.getElementById(id).style.display = "none";
            }
           
        </script>

    </body>
</html>
